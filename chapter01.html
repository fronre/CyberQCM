<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Chapter 1 â€” Cybersecurity Quiz (50 Questions) </title>
<style>
  /* ====== Base / Reset ====== */
  :root{
    --bg1:#071821; --glass: rgba(255,255,255,0.04);
    --neon:#00eaff; --accent:#7c3aed; --muted:#9fb3c8; --card-shadow: 0 8px 40px rgba(2,8,20,0.6);
    --good:#16a34a; --bad:#ef4444;
  }
  html,body{height:100%;margin:0;font-family: "Cairo", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background: radial-gradient(circle at 10% 10%, #04202a 0%, #000814 60%); color:#e6f6ff}
  .wrap{max-width:1100px;margin:24px auto;padding:18px}
  header{padding:35px 20px;margin:0 -20px 35px -20px;background:linear-gradient(135deg, rgba(0,234,255,0.12) 0%, rgba(124,58,237,0.08) 100%);border-bottom:3px solid var(--neon);box-shadow:0 6px 30px rgba(0,234,255,0.15)}
  header h1{margin:0 0 10px 0;font-size:26px;color:var(--neon);text-shadow:0 0 20px rgba(0,234,255,0.4);font-weight:700;letter-spacing:0.5px}
  header p{margin:0;color:var(--muted);font-size:13px;line-height:1.5}
  .layout{display:grid;grid-template-columns:320px 1fr;gap:18px;margin-top:18px}
  @media(max-width:920px){ .layout{grid-template-columns:1fr} }

  /* ====== Sidebar definitions ====== */
  .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:16px;border-radius:14px;box-shadow:var(--card-shadow);border:1px solid rgba(255,255,255,0.03)}
  .defs h2{color:var(--accent);margin:0 0 8px 0}
  .def{padding:10px;margin:8px 0;border-radius:10px;background:rgba(0,0,0,0.25); border-left:4px solid var(--neon);color:#dff6ff;font-size:14px}

  /* ====== Quiz area ====== */
  .controls{display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-bottom:12px}
  .search{flex:1;padding:8px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--neon)}
  .btn{background:var(--neon);color:#002;border:none;padding:10px 12px;border-radius:10px;font-weight:700;cursor:pointer}
  .btn.secondary{background:transparent;color:var(--neon);border:1px solid rgba(255,255,255,0.04)}

  .qcard{margin-bottom:12px;padding:14px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));border:1px solid rgba(255,255,255,0.02)}
  .qhead{display:flex;justify-content:space-between;align-items:center;gap:12px}
  .qnum{font-weight:800;color:var(--neon)}
  .qtext{font-weight:700;color:#c9f4ff;margin-top:8px}
  .opts{margin-top:10px;display:flex;flex-direction:column;gap:8px}
  .opt{padding:10px;border-radius:10px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.02);cursor:pointer;transition:all 0.15s ease}
  .opt:hover{transform:translateY(-3px);box-shadow:0 8px 30px rgba(0,234,255,0.03)}
  .opt.selected{outline:3px solid rgba(0,234,255,0.12)}
  .opt.correct{background:rgba(22,163,74,0.12);border-color:rgba(22,163,74,0.4);box-shadow:0 8px 30px rgba(22,163,74,0.06)}
  .opt.wrong{background:rgba(239,68,68,0.08);border-color:rgba(239,68,68,0.35);box-shadow:0 8px 30px rgba(239,68,68,0.06)}

  .actions{display:flex;gap:8px;margin-top:10px}
  .reveal{padding:10px;border-radius:10px;background:linear-gradient(90deg, rgba(0,234,255,0.04), rgba(124,58,237,0.03));display:none}
  .reveal strong{color:var(--neon)}
  .explain{margin-top:8px;color:var(--muted);font-size:14px}

  /* ====== Score box ====== */
  .score-wrap{margin-top:16px;padding:14px;border-radius:12px;background:linear-gradient(180deg, rgba(124,58,237,0.04), rgba(0,0,0,0.2));border:1px solid rgba(255,255,255,0.02)}
  .score h2{margin:0;color:var(--neon)}
  .result{font-size:18px;color:#dff6ff;margin-top:8px}

  /* small text */
  .muted{color:var(--muted);font-size:13px}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div>
      <h1>Chapter 1 â€” Cybersecurity QCM (50 Questions)</h1>
      <p class="muted">Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© â€” Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª ÙˆØ§Ù„Ø´Ø±ÙˆØ­ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©. <a href="main.html" style="color:var(--neon);text-decoration:underline">Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></p>
    </div>
  </header>

  <div class="layout">
    <!-- SIDEBAR -->
    <aside class="card defs">
      <h2>ØªØ¹Ø±ÙŠÙØ§Øª Ø³Ø±ÙŠØ¹Ø©</h2>
      <div class="def"><strong>Confidentiality</strong> â€” Ø§Ù„Ø³Ø±ÙŠØ©: Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ù† Ø§Ù„ÙˆØµÙˆÙ„ ØºÙŠØ± Ø§Ù„Ù…ØµØ±Ø­.</div>
      <div class="def"><strong>Integrity</strong> â€” Ø§Ù„ØªÙƒØ§Ù…Ù„: Ø¶Ù…Ø§Ù† Ø£Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù… ØªØªØºÙŠØ± Ø¨Ø¯ÙˆÙ† Ø¥Ø°Ù†.</div>
      <div class="def"><strong>Availability</strong> â€” Ø§Ù„ØªÙˆÙØ±: Ø¶Ù…Ø§Ù† Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø®Ø¯Ù…Ø§Øª ÙˆØ§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø©.</div>
      <div class="def"><strong>Malware</strong> â€” Ø¨Ø±Ù…Ø¬ÙŠØ§Øª Ø®Ø¨ÙŠØ«Ø©: Ø¨Ø±Ø§Ù…Ø¬ ØªÙ‡Ø¯Ù Ù„Ù„Ø¶Ø±Ø± Ø£Ùˆ Ø§Ù„ØªØ¬Ø³Ø³.</div>
      <div class="def"><strong>XSS / SQLi / Ransomware</strong> â€” Ø£Ù…Ø«Ù„Ø© Ø´Ø§Ø¦Ø¹Ø© Ù„Ù„Ù‡Ø¬Ù…Ø§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ©.</div>
      <div style="margin-top:10px;color:var(--muted);font-size:13px">Ù…Ù„Ø§Ø­Ø¸Ø©: Ø§Ù„Ø´Ø±Ø­ Ù…ÙˆØ¬Ù‘Ù‡ Ù„Ù„ØªØ¹Ù„Ù‘Ù… ÙˆØ§Ù„Ø£ØºØ±Ø§Ø¶ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ© ÙÙ‚Ø·.</div>
    </aside>

    <!-- MAIN QUIZ AREA -->
    <main>
      <div class="card">
        <div class="controls">
          <input id="search" class="search" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø³Ø¤Ø§Ù„..." />
          <button id="shuffle" class="btn secondary">Ø®Ù„Ø· Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</button>
          <button id="showAll" class="btn secondary">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„</button>
        </div>

        <div id="quizList"></div>

        <div class="score-wrap">
          <div class="score">
            <h2>Ø§Ù„Ù†ØªÙŠØ¬Ø©</h2>
            <div class="result" id="resultText">Ù„Ù… ÙŠØªÙ… Ø§Ø­ØªØ³Ø§Ø¨ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¨Ø¹Ø¯. Ø§Ø¶ØºØ· "Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±" Ø¹Ù†Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡.</div>
            <div style="margin-top:8px;display:flex;gap:8px;flex-wrap:wrap">
              <button id="finishBtn" class="btn">Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ÙˆØ­Ø³Ø§Ø¨ Ø§Ù„Ù†ØªÙŠØ¬Ø©</button>
              <button id="resetBtn" class="btn secondary">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙ‡ÙŠØ¦Ø©</button>
            </div>
            <div id="advice" class="explain"></div>
          </div>
        </div>

      </div>
    </main>
  </div>
</div>

<script>
/* ====== Dataset: 50 questions ====== */
const questions = [
/* 0 */ { q:"What is IP spoofing?", opts:["Encrypting packets", "Updating DNS", "Filtering traffic", "Faking source IP address"], answerArabic:"ØªØ²ÙˆÙŠØ± Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù€ IP Ø§Ù„Ù…ØµØ¯Ø±.", exp1:"Ø§Ù„Ù…Ù‡Ø§Ø¬Ù… ÙŠØºÙŠØ± Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…ØµØ¯Ø± Ù„ÙŠØ¨Ø¯Ùˆ ÙˆÙƒØ£Ù†Ù‡ Ù…Ù† Ø¬Ù‡Ø§Ø² Ø¢Ø®Ø±.", exp2:"ÙŠØ³ØªØ®Ø¯Ù… Ù„ØªØ¬Ø§ÙˆØ² Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„ØªØ­ÙƒÙ… Ø£Ùˆ Ù„Ø®Ø¯Ø§Ø¹ Ø§Ù„Ø¶Ø­ÙŠØ© Ø£Ùˆ Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ø´Ø¨ÙƒØ©."},
/* 1 */ { q:"What is ARP poisoning?", opts:["Injecting fake ARP entries", "Port knocking", "Session hijack", "Brute force"], answerArabic:"Ø­Ù‚Ù† Ù…Ø¯Ø®Ù„Ø§Øª ARP Ø®Ø§Ø·Ø¦Ø© ÙÙŠ Ø´Ø¨ÙƒØ© Ù…Ø­Ù„ÙŠØ©.", exp1:"ÙŠØºÙŠÙ‘Ø± Ø§Ù„Ù…Ù‡Ø§Ø¬Ù… Ø§Ø±ØªØ¨Ø§Ø· Ø§Ù„Ù€ IP Ù…Ø¹ MAC Ù„ÙŠØ­Ø±Ù Ø§Ù„Ù…Ø±ÙˆØ±.", exp2:"ÙŠØ¤Ø¯ÙŠ Ø¥Ù„Ù‰ Ø§Ø¹ØªØ±Ø§Ø¶ Ø§Ù„Ø­Ø±ÙƒØ© Ø£Ùˆ ØªÙ†ÙÙŠØ° Ù‡Ø¬ÙˆÙ… Man-in-the-Middle."},
/* 2 */ { q:"DNS cache poisoning aims to:", opts:["Update records", "Speed DNS", "Store fake DNS responses", "Encrypt DNS"], answerArabic:"ØªØ®Ø²ÙŠÙ† Ø±Ø¯ÙˆØ¯ DNS Ù…Ø²ÙŠÙØ© ÙÙŠ Ø§Ù„ÙƒØ§Ø´ Ù„Ø¥Ø¹Ø§Ø¯Ø© ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†.", exp1:"Ø¨Ø¹Ø¯ Ø§Ù„ØªØ³Ù…ÙŠÙ…ØŒ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ°Ù‡Ø¨ Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¶Ø­ÙŠØ© Ø¨Ø¯Ù„ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ù‚ØµÙˆØ¯.", exp2:"ÙŠØ³ØªØºÙ„ Ø¶Ø¹Ù Ø§Ù„Ù€ resolver Ø£Ùˆ Ù‚Ø±Ø¨ Ø§Ù„ÙˆÙ‚Øª/TTL Ù„ØªÙ†ÙÙŠØ° Ø§Ù„Ù‡Ø¬ÙˆÙ…."},
/* 3 */ { q:"What is a SYN flood attack?", opts:["ARP scan", "DNS hijack", "Many SYN requests without completion", "SQL injection"], answerArabic:"Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¯Ø¯ ÙƒØ¨ÙŠØ± Ù…Ù† Ø·Ù„Ø¨Ø§Øª SYN Ø¯ÙˆÙ† Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…ØµØ§ÙØ­Ø© TCP.", exp1:"Ø§Ù„Ø®Ø§Ø¯Ù… ÙŠØ¨Ù‚Ù‰ Ø¨Ø§Ù†ØªØ¸Ø§Ø± ACK Ù…Ø§ ÙŠØ¤Ø¯ÙŠ Ù„Ø§Ø³ØªÙ†Ø²Ø§Ù Ø§Ù„Ù…ÙˆØ§Ø±Ø¯.", exp2:"Ù†ÙˆØ¹ Ù…Ù† Ù‡Ø¬Ù…Ø§Øª DoS ÙŠÙ‡Ø¯Ù Ù„Ù‚Ø·Ø¹ Ø§Ù„Ø®Ø¯Ù…Ø© Ø¹Ø¨Ø± Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ø§ØªØµØ§Ù„Ø§Øª."},
/* 4 */ { q:"What does XSS attack target?", opts:["Antivirus", "User browsers", "Database engine", "Router firmware"], answerArabic:"Ù…ØªØµÙØ­Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¹Ø¨Ø± ØªÙ†ÙÙŠØ° Ø³ÙƒØ±Ø¨Øª Ø¶Ø§Ø±.", exp1:"ÙŠØ­Ù‚Ù† Ø§Ù„Ù…Ù‡Ø§Ø¬Ù… Ø¬Ø§ÙØ§Ø³ÙƒØ±Ø¨Øª ØªØ¹Ù…Ù„ Ø¹Ù†Ø¯ Ø¶Ø­ÙŠØ© ØªØ²ÙˆØ± Ø§Ù„ØµÙØ­Ø©.", exp2:"ÙŠÙ…ÙƒÙ† Ø³Ø±Ù‚Ø© Ø§Ù„ÙƒÙˆÙƒÙŠØ²ØŒ ØªÙ†ÙÙŠØ° Ø£ÙˆØ§Ù…Ø± Ù†ÙŠØ§Ø¨Ø© Ø¹Ù† Ø§Ù„Ø¶Ø­ÙŠØ©ØŒ Ø£Ùˆ ØªØºÙŠÙŠØ±Ø§Øª Ø¨Ø§Ù„Ù…Ø­ØªÙˆÙ‰."},
/* 5 */ { q:"What is SQL Injection?", opts:["Encrypting DB", "Firewall rule", "Injecting malicious SQL commands", "Data backup"], answerArabic:"Ø­Ù‚Ù† Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª SQL Ø®Ø¨ÙŠØ«Ø© Ø¹Ø¨Ø± Ù…Ø¯Ø®Ù„Ø§Øª ØºÙŠØ± Ù…Ø¹Ù‚Ù…Ø©.", exp1:"Ø§Ù„Ù…Ù‡Ø§Ø¬Ù… ÙŠØºÙŠÙ‘Ø± Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø£Ùˆ ØªØºÙŠÙŠØ±Ù‡Ø§.", exp2:"ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠØ¤Ø¯ÙŠ Ù„ØªØ³Ø±ÙŠØ¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø³Ø§Ø³Ø© Ø£Ùˆ Ø­Ø°ÙÙ‡Ø§ Ø£Ùˆ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù…ØªÙŠØ§Ø²Ø§Øª."},
/* 6 */ { q:"What is ransomware?", opts:["Patch management", "Rootkit", "Malware that encrypts files for ransom", "Adware"], answerArabic:"Ø¨Ø±Ù…Ø¬ÙŠØ© Ø®Ø¨ÙŠØ«Ø© ØªØ´ÙØ± Ù…Ù„ÙØ§Øª Ø§Ù„Ø¶Ø­ÙŠØ© ÙˆØªØ·Ø§Ù„Ø¨ Ø¨ÙØ¯ÙŠØ©.", exp1:"ÙŠÙ…Ù†Ø¹ Ø§Ù„Ø¶Ø­ÙŠØ© Ù…Ù† Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù…Ù„ÙØ§ØªÙ‡ Ø¯ÙˆÙ† Ø¯ÙØ¹ Ø§Ù„ÙØ¯ÙŠØ©.", exp2:"Ù‚Ø¯ ØªØ³Ø±Ù‚ Ù†Ø³Ø®Ø§Ù‹ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù‚Ø¨Ù„ Ø§Ù„ØªØ´ÙÙŠØ± ÙˆØªØ³ØªØ®Ø¯Ù… Ù„Ù„Ø¶ØºØ·."},
/* 7 */ { q:"What is a worm?", opts:["Password manager", "Self-replicating malware across networks", "Firewall feature", "Browser exploit"], answerArabic:"Ø¨Ø±Ù…Ø¬ÙŠØ© Ø®Ø¨ÙŠØ«Ø© ØªÙ†Ø³Ø® Ù†ÙØ³Ù‡Ø§ ÙˆØªÙ†ØªØ´Ø± Ø¹Ø¨Ø± Ø§Ù„Ø´Ø¨ÙƒØ§Øª.", exp1:"Ø§Ù„Ù€ worm ÙŠÙ‡Ø§Ø¬Ø± Ø¨Ù„Ø§ ØªØ¯Ø®Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¥Ù„Ù‰ Ø£Ø¬Ù‡Ø²Ø© Ø£Ø®Ø±Ù‰.", exp2:"ÙŠØ³Ø¨Ø¨ Ø§Ù†ØªØ´Ø§Ø±Ø§Ù‹ Ø³Ø±ÙŠØ¹Ø§Ù‹ ÙˆÙŠØ³ØªÙ‡Ù„Ùƒ Ø¹Ø±Ø¶ Ø§Ù„Ù†Ø·Ø§Ù‚ ÙˆØ§Ù„Ù…ÙˆØ§Ø±Ø¯."},
/* 8 */ { q:"What is a Trojan?", opts:["IDS system", "Malicious program disguised as legitimate", "Encryption tool", "Network scanner"], answerArabic:"Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø®Ø¨ÙŠØ« ÙŠØªØ¸Ø§Ù‡Ø± Ø¨Ø£Ù†Ù‡ Ù…Ø´Ø±ÙˆØ¹ Ù„ÙƒÙ†Ù‡ ÙŠØ­ØªÙˆÙŠ ÙˆØ¸Ø§Ø¦Ù Ø¶Ø§Ø±Ø©.", exp1:"ÙŠØ®Ø¯Ø¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„ØªÙ†Ø²ÙŠÙ„Ù‡ Ø«Ù… ÙŠÙØ¹Ù„ Ù…Ù‡Ø§Ù… Ø¶Ø§Ø±Ø© ÙƒÙØªØ­ Ø¨ÙˆØ§Ø¨Ø§Øª Ø®Ù„ÙÙŠØ©.", exp2:"ÙŠÙØ³ØªØ®Ø¯Ù… Ø¹Ø§Ø¯Ø© Ù„Ù„ÙˆØµÙˆÙ„ ØºÙŠØ± Ø§Ù„Ù…ØµØ±Ø­ Ø£Ùˆ ØªØ­Ù…ÙŠÙ„ Ø£Ø¯ÙˆØ§Øª Ø£Ø®Ø±Ù‰."},
/* 9 */ { q:"What is a rootkit?", opts:["Tool to hide malware presence", "Antivirus signature", "Backup tool", "Encryption method"], answerArabic:"Ø£Ø¯Ø§Ø© ØªØ¹Ù…Ù„ Ø¹Ù„Ù‰ Ø¥Ø®ÙØ§Ø¡ ÙˆØ¬ÙˆØ¯ Ø¨Ø±Ù…Ø¬ÙŠØ§Øª Ø®Ø¨ÙŠØ«Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„Ù†Ø¸Ø§Ù….", exp1:"ØªØªÙ„Ø§Ø¹Ø¨ Ø¨Ø§Ù„Ù†ÙˆØ§Ø© Ø£Ùˆ Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ù„ØªØ®ÙÙŠ Ù…Ù„ÙØ§Øª ÙˆØ¹Ù…Ù„ÙŠØ§Øª.", exp2:"ØªØ¬Ø¹Ù„ Ø§ÙƒØªØ´Ø§Ù ÙˆØ¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ§Øª Ø§Ù„Ø®Ø¨ÙŠØ«Ø© ØµØ¹Ø¨Ø§Ù‹ Ù„Ù„ØºØ§ÙŠØ©."},
/* 10 */ { q:"What is 'social engineering'?", opts:["Encrypting traffic", "Manipulating people to reveal info", "Malware scan", "Port forwarding"], answerArabic:"Ø®Ø¯Ø§Ø¹ Ø§Ù„Ø£Ø´Ø®Ø§Øµ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø£Ùˆ ÙˆØµÙˆÙ„.", exp1:"Ø§Ù„Ù‡Ø¬ÙˆÙ… ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø¶Ø¹Ù Ø§Ù„Ø³Ù„ÙˆÙƒ ÙˆÙ„ÙŠØ³ Ø«ØºØ±Ø© ØªÙ‚Ù†ÙŠØ©.", exp2:"Ø£Ù…Ø«Ù„Ø©: phishingØŒ pretextingØŒ vishingØŒ tailgating."},
/* 11 */ { q:"What is phishing?", opts:["System update", "File compression", "Network slowdown", "Fraudulent messages to steal credentials"], answerArabic:"Ø±Ø³Ø§Ø¦Ù„ Ø§Ø­ØªÙŠØ§Ù„ÙŠØ© ØªÙ‡Ø¯Ù Ù„Ø®Ø¯Ø§Ø¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ³Ø±Ù‚Ø© Ø¨ÙŠØ§Ù†Ø§ØªÙ‡.", exp1:"ØªÙØ±Ø³Ù„ Ø±Ø³Ø§Ø¦Ù„ ØªØ´Ø¨Ù‡ Ø¬Ù‡Ø§Øª Ù…ÙˆØ«ÙˆÙ‚Ø© ÙˆØªØ·Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø³Ø§Ø³Ø©.", exp2:"Ù‚Ø¯ ØªÙˆØ¬Ù‡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ù…ÙˆØ§Ù‚Ø¹ Ù…Ø²ÙŠÙØ© ØªØ·Ù„Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„."},
/* 12 */ { q:"What is 'brute force' attack?", opts:["SQL patch", "ARP spoofing", "Trying many passwords until success", "Phishing attack"], answerArabic:"Ù…Ø­Ø§ÙˆÙ„Ø© ÙƒÙ„ ØªØ±ÙƒÙŠØ¨Ø§Øª ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø³Ø± Ø­ØªÙ‰ Ø§Ù„ÙˆØµÙˆÙ„.", exp1:"ÙŠØ³ØªØ¹Ù…Ù„ Ø¨Ø±Ø§Ù…Ø¬ Ø£Ùˆ Ø³ÙƒØ±Ø¨ØªØ§Øª Ù„ØªØ®Ù…ÙŠÙ† ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ø³Ø±Ø¹Ø©.", exp2:"ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ®ÙÙŠÙ Ù…Ù†Ù‡ Ø¨ÙØ±Ø¶ Ù‚ÙŠÙˆØ¯ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª ÙˆØ§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„Ø«Ù†Ø§Ø¦ÙŠØ©."},
/* 13 */ { q:"Two-Factor Authentication (2FA) means:", opts:["Two verification methods for identity", "Two firewalls", "Two emails", "Two passwords"], answerArabic:"Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø·Ø±ÙŠÙ‚ØªÙŠÙ† Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù‡ÙˆÙŠØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù….", exp1:"Ù…Ø«Ø§Ù„: ÙƒÙ„Ù…Ø© Ø³Ø± + ÙƒÙˆØ¯ Ù…Ù† ØªØ·Ø¨ÙŠÙ‚ Ø£Ùˆ Ø±Ø³Ø§Ù„Ø© SMS.", exp2:"ÙŠØ²ÙŠØ¯ Ù…Ù† Ø£Ù…Ø§Ù† Ø§Ù„Ø­Ø³Ø§Ø¨ Ø­ØªÙ‰ Ù„Ùˆ ØªØ³Ø±Ø¨Øª ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±."},
/* 14 */ { q:"What is a firewall?", opts:["Data backup", "DNS server", "Malware type", "Device that filters network traffic"], answerArabic:"Ø¬Ù‡Ø§Ø² Ø£Ùˆ Ø¨Ø±Ù†Ø§Ù…Ø¬ ÙŠÙÙ„ØªØ± Ø­Ø±ÙƒØ© Ø§Ù„Ø´Ø¨ÙƒØ© ÙˆÙŠÙ…Ù†Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„Ø§Øª ØºÙŠØ± Ø§Ù„Ù…Ø±ØºÙˆØ¨Ø©.", exp1:"ÙŠØ·Ø¨Ù‚ Ù‚ÙˆØ§Ø¹Ø¯ Ù„ØªØ­Ø¯ÙŠØ¯ Ù…Ø§ ÙŠÙØ³Ù…Ø­ ÙˆÙ…Ø§ ÙŠÙÙ…Ù†Ø¹ Ù…Ù† Ø§ØªØµØ§Ù„Ø§Øª.", exp2:"ÙŠØ¹Ù…Ù„ Ø¹Ù„Ù‰ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø´Ø¨ÙƒØ© Ø£Ùˆ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù„ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù‡Ø¬Ù…Ø§Øª."},
/* 15 */ { q:"What is IDS (Intrusion Detection System)?", opts:["Scans ports only", "Encrypts files", "Detects suspicious activity", "Reboots servers"], answerArabic:"Ù†Ø¸Ø§Ù… ÙŠÙƒØ´Ù Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ù…Ø´Ø¨ÙˆÙ‡ ÙˆÙŠÙØ¨Ù„Ù‘Øº Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠÙ†.", exp1:"ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙƒÙˆÙ† Ø´Ø¨ÙƒÙŠØ§Ù‹ Ø£Ùˆ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¶ÙŠÙ ÙˆÙŠÙƒØ´Ù Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„ØªØ³Ù„Ù„.", exp2:"Ù„Ø§ ÙŠÙ…Ù†Ø¹ Ø¨Ø§Ù„Ø¶Ø±ÙˆØ±Ø© Ù„ÙƒÙ†Ù‡ ÙŠØ¯Ø¹Ù… Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„Ø³Ø±ÙŠØ¹Ø© Ù„Ù„Ø­ÙˆØ§Ø¯Ø«."},
/* 16 */ { q:"What is IPS (Intrusion Prevention System)?", opts:["Detects and blocks attacks", "Backs up data", "Only logs events", "Encrypts traffic"], answerArabic:"Ù†Ø¸Ø§Ù… ÙŠÙƒØªØ´Ù ÙˆÙŠÙ…Ù†Ø¹ Ø§Ù„Ù‡Ø¬Ù…Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹.", exp1:"ÙŠØ´Ø¨Ù‡ IDS ÙˆÙ„ÙƒÙ†Ù‡ Ù‚Ø§Ø¯Ø± Ø¹Ù„Ù‰ Ø­Ø¬Ø¨ Ø§Ù„Ø§ØªØµØ§Ù„Ø§Øª Ø§Ù„Ù…Ø´Ø¨ÙˆÙ‡Ø©.", exp2:"ÙŠØªØ·Ù„Ø¨ Ø¶Ø¨Ø·Ø§Ù‹ Ø¯Ù‚ÙŠÙ‚Ø§Ù‹ Ù„ØªØ¬Ù†Ø¨ Ø­Ø¬Ø¨ Ø­Ø±ÙƒØ© Ø´Ø±Ø¹ÙŠØ© (false positives)."},
/* 17 */ { q:"What is 'man-in-the-middle' (MITM)?", opts:["Malware update", "DNS server", "USB infection", "Attacker intercepts communications"], answerArabic:"Ø§Ø¹ØªØ±Ø§Ø¶ Ø§Ù„Ù…Ù‡Ø§Ø¬Ù… Ù„Ù„Ø§ØªØµØ§Ù„ Ø¨ÙŠÙ† Ø·Ø±ÙÙŠÙ† Ù„Ù‚Ø±Ø§Ø¡Ø© Ø£Ùˆ ØªØºÙŠÙŠØ± Ø§Ù„Ø±Ø³Ø§Ø¦Ù„.", exp1:"Ø§Ù„Ù…Ù‡Ø§Ø¬Ù… ÙŠÙ…Ø±Ø± Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø¨Ø¹Ø¯ ØªØ¹Ø¯ÙŠÙ„Ù‡Ø§ Ø£Ùˆ Ù…Ø±Ø§Ù‚Ø¨ØªÙ‡Ø§.", exp2:"Ø§Ù„Ø­Ù…Ø§ÙŠØ©: ØªØ´ÙÙŠØ± Ø§Ù„Ø·Ø±Ù Ø§Ù„Ø·Ø±Ù (TLS) ÙˆØ§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª."},
/* 18 */ { q:"What is SSL/TLS used for?", opts:["Scanning ports", "Compressing images", "Blocking IPs", "Encrypting connections (HTTPS)"], answerArabic:"ØªØ´ÙÙŠØ± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨ÙŠÙ† Ø§Ù„Ù…ØªØµÙØ­ ÙˆØ§Ù„Ø®Ø§Ø¯Ù… Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø³Ø±ÙŠØ© ÙˆØ§Ù„Ø³Ù„Ø§Ù…Ø©.", exp1:"ÙŠÙ…Ù†Ø¹ Ø§Ù„ØªÙ†ØµØª ÙˆÙŠØ¤Ù…Ù† ØªØ¨Ø§Ø¯Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‡Ø§Ù…Ø©.", exp2:"ÙŠØ³ØªØ®Ø¯Ù… Ø´Ù‡Ø§Ø¯Ø§Øª Ø±Ù‚Ù…ÙŠØ© Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù‡ÙˆÙŠØ© Ø§Ù„Ø®ÙˆØ§Ø¯Ù…."},
/* 19 */ { q:"What is 'certificate pinning'?", opts:["Firewall rule", "Encrypting files", "Port scanning", "Binding a service to a specific certificate"], answerArabic:"Ø±Ø¨Ø· ØªØ·Ø¨ÙŠÙ‚ Ø¨Ø´Ù‡Ø§Ø¯Ø© Ø±Ù‚Ù…ÙŠØ© Ù…Ø­Ø¯Ø¯Ø© Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù….", exp1:"ÙŠÙ‚Ù„Ù„ Ù…Ø®Ø§Ø·Ø± MITM Ø¹Ø¨Ø± Ø±ÙØ¶ Ø´Ù‡Ø§Ø¯Ø§Øª Ø£Ø®Ø±Ù‰.", exp2:"Ù…ÙÙŠØ¯ ÙÙŠ ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ø¬ÙˆØ§Ù„ Ù„ØªÙ‚ÙˆÙŠØ© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø®ÙˆØ§Ø¯Ù…."},
/* 20 */ { q:"What is 'hashing'?", opts:["File transfer", "One-way function to represent data", "Two-way encryption", "Password storage in plain"], answerArabic:"Ø¯Ø§Ù„Ø© ØªØ­ÙˆÙŠÙ„ Ø£Ø­Ø§Ø¯ÙŠØ© Ø§Ù„Ø§ØªØ¬Ø§Ù‡ ØªÙØ³ØªØ®Ø¯Ù… Ù„ØªÙ…Ø«ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.", exp1:"Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ø§Ù„Ù†Øµ Ø§Ù„Ø£ØµÙ„ÙŠ Ø¨Ø³Ù‡ÙˆÙ„Ø© Ù…Ù† Ø§Ù„Ù‡Ø§Ø´.", exp2:"ÙŠØ³ØªØ®Ø¯Ù… Ù„Ø­ÙØ¸ ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± ÙˆÙ…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ø³Ù„Ø§Ù…Ø© (integrity)."},
/* 21 */ { q:"What is 'salting' passwords?", opts:["Double hashing", "Removing password", "Adding random data before hashing", "Encrypting hash"], answerArabic:"Ø¥Ø¶Ø§ÙØ© Ø³Ù„Ø§Ø·Ø© (Ù‚ÙŠÙ…Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©) Ù‚Ø¨Ù„ Ø§Ù„Ù‡Ø§Ø´Ù† Ù„Ù…Ù†Ø¹ Ù‡Ø¬Ù…Ø§Øª Ø§Ù„Ù‚ÙˆØ§Ù…ÙŠØ³.", exp1:"Ø­ØªÙ‰ Ù„Ùˆ ØªØ³Ø§ÙˆÙ‰ ÙƒÙ„Ù…ØªØ§ Ø³Ø±ØŒ Ø³ÙŠØ®ØªÙ„Ù Ø§Ù„Ù‡Ø§Ø´ Ø¨ÙˆØ¬ÙˆØ¯ Ø³Ø§Ù„Øª Ù…Ø®ØªÙ„Ù.", exp2:"ÙŠØ¬Ø¹Ù„ Ø§Ù„Ù‡Ø¬Ù…Ø§Øª Ø¹Ù„Ù‰ Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù‡Ø§Ø´ Ø£Ù‚Ù„ ÙØ§Ø¹Ù„ÙŠØ©."},
/* 22 */ { q:"What is 'social engineering: pretexting'?", opts:["Malware signature", "Port scanning", "SQL fixing", "Creating a fake identity to extract info"], answerArabic:"Ø§Ø®ØªØ±Ø§Ø¹ Ù‚ØµØ© Ø£Ùˆ Ù‡ÙˆÙŠØ© Ù…Ø²ÙŠÙØ© Ù„Ø®Ø¯Ø§Ø¹ Ø§Ù„Ø¶Ø­ÙŠØ© ÙˆØ¥Ø®Ø±Ø§Ø¬ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª.", exp1:"Ø§Ù„Ù…Ù‡Ø§Ø¬Ù… ÙŠØªØ¸Ø§Ù‡Ø± Ø¨Ù…ÙˆØ¸Ù Ø£Ùˆ Ø¬Ù‡Ø© Ø±Ø³Ù…ÙŠØ© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª.", exp2:"ÙŠØµØ¹Ø¨ Ø§ÙƒØªØ´Ø§ÙÙ‡ Ù„Ø£Ù† Ø§Ù„Ø£Ø³Ù„ÙˆØ¨ ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø§Ù„ØªÙØ§Ø¹Ù„ Ø§Ù„Ø¥Ù†Ø³Ø§Ù†ÙŠ."},
];

/* ====== State (per original question index) ====== */
const totalQuestions = questions.length;
let state = new Array(totalQuestions).fill(null).map(()=>({ selIndex:null, revealed:false, scored:false }));

/* ====== displayOrder: array of original indices in the order currently shown ====== */
let displayOrder = Array.from({length: totalQuestions}, (_,i)=>i);

/* ====== Rendering function now uses displayOrder ====== */
const quizList = document.getElementById('quizList');

function renderQuestionsByOrder(){
  quizList.innerHTML = '';
  displayOrder.forEach((origIdx, displayPos) => {
    const it = questions[origIdx];
    const div = document.createElement('div');
    div.className = 'qcard';
    div.dataset.orig = origIdx; // store original index for easy lookup
    div.innerHTML = `
      <div class="qhead"><div class="qnum">Q${displayPos+1}</div><div class="muted">Ø³Ø¤Ø§Ù„ Ø±Ù‚Ù… ${displayPos+1}</div></div>
      <div class="qtext">${it.q}</div>
      <div class="opts" id="opts-${origIdx}">
        ${it.opts.map((o,i)=>`<div class="opt" data-qorig="${origIdx}" data-i="${i}"><strong>${String.fromCharCode(65+i)}.</strong> ${o}</div>`).join('')}
      </div>
      <div class="actions">
        <button class="btn revealBtn" data-qorig="${origIdx}">Ø£Ø¸Ù‡Ø± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</button>
        <button class="btn secondary explainBtn" data-qorig="${origIdx}">Ø¹Ø±Ø¶ Ø§Ù„Ø´Ø±Ø­ÙŠÙ†</button>
      </div>
      <div class="reveal" id="reveal-${origIdx}">
        <div><strong>Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© (Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©):</strong> <span id="ans-${origIdx}"></span></div>
        <div class="explain" id="exp1-${origIdx}"></div>
        <div class="explain" id="exp2-${origIdx}"></div>
      </div>
    `;
    quizList.appendChild(div);

    // If user already answered this origIdx previously (from previous render), reflect that visually:
    const sel = state[origIdx].selIndex;
    if(sel !== null){
      const optsContainer = div.querySelector('.opts');
      const chosenEl = optsContainer.querySelector(`.opt[data-i="${sel}"]`);
      if(chosenEl) chosenEl.classList.add('selected');
      // if already scored, mark correct/wrong
      if(state[origIdx].scored){
        const correctIdx = getCorrectIndex(origIdx);
        if(chosenEl){
          if(chosenEl.dataset.i == correctIdx) chosenEl.classList.add('correct');
          else chosenEl.classList.add('wrong');
        }
        const correctEl = optsContainer.querySelector(`.opt[data-i="${correctIdx}"]`);
        if(correctEl) correctEl.classList.add('correct');
        // disable pointer events
        optsContainer.querySelectorAll('.opt').forEach(el => el.style.pointerEvents = 'none');
        // show reveal if previously revealed
        if(state[origIdx].revealed){
          showAnswer(origIdx);
        }
      }
    }
  });
}

/* initial render */
renderQuestionsByOrder();

/* ====== helper: correctIndexMap ======
   currently all correct answers are option index 0 in the dataset.
   If you change the correct option for any question, update this map:
   key = question original index (0..49), value = correct option index (0..3)
*/
const correctIndexMap = {
  0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,
  10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,
  20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,
  30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,
  40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0
};

function getCorrectIndex(origQuestionIndex){
  return (typeof correctIndexMap[origQuestionIndex] !== 'undefined') ? correctIndexMap[origQuestionIndex] : 0;
}

/* ====== Event delegation: handle clicks on options & buttons ====== */
quizList.addEventListener('click', function(e){
  const opt = e.target.closest('.opt');
  if(opt){
    const orig = parseInt(opt.dataset.qorig,10);
    const chosen = parseInt(opt.dataset.i,10);
    handleSelection(orig, chosen, opt.closest('.qcard'));
    return;
  }
  const revealBtn = e.target.closest('.revealBtn');
  if(revealBtn){
    const orig = parseInt(revealBtn.dataset.qorig,10);
    showAnswer(orig);
    return;
  }
  const explainBtn = e.target.closest('.explainBtn');
  if(explainBtn){
    const orig = parseInt(explainBtn.dataset.qorig,10);
    showAnswer(orig);
    return;
  }
});

/* ====== handleSelection: immediate feedback + scoring lock ====== */
function handleSelection(origIndex, chosenIndex, cardElement){
  // safety
  if(origIndex < 0 || origIndex >= questions.length) return;

  // if already scored, do nothing (prevent change)
  if(state[origIndex].scored) return;

  const optsContainer = cardElement.querySelector('.opts');
  // mark visual selection
  optsContainer.querySelectorAll('.opt').forEach(el=> el.classList.remove('selected'));
  const chosenEl = optsContainer.querySelector(`.opt[data-i="${chosenIndex}"]`);
  if(chosenEl) chosenEl.classList.add('selected');

  // determine correct index
  const correctIdx = getCorrectIndex(origIndex);

  if(chosenIndex === correctIdx){
    // correct
    if(chosenEl) chosenEl.classList.add('correct');
    state[origIndex].selIndex = chosenIndex;
    state[origIndex].scored = true;
    // reveal answer & explanations
    showAnswer(origIndex);
  } else {
    // wrong
    if(chosenEl) chosenEl.classList.add('wrong');
    const correctEl = optsContainer.querySelector(`.opt[data-i="${correctIdx}"]`);
    if(correctEl) correctEl.classList.add('correct');
    state[origIndex].selIndex = chosenIndex;
    state[origIndex].scored = true; // attempted but 0 point
    showAnswer(origIndex);
  }

  // disable further clicks on options for this question
  optsContainer.querySelectorAll('.opt').forEach(el => el.style.pointerEvents = 'none');
}

/* ====== showAnswer (Arabic) ====== */
function showAnswer(origIndex){
  const rdiv = document.getElementById(`reveal-${origIndex}`);
  if(!rdiv) return;
  const ansSpan = document.getElementById(`ans-${origIndex}`);
  const exp1 = document.getElementById(`exp1-${origIndex}`);
  const exp2 = document.getElementById(`exp2-${origIndex}`);
  const item = questions[origIndex];
  ansSpan.textContent = item.answerArabic;
  exp1.textContent = "Ø´Ø±Ø­ 1: " + item.exp1;
  exp2.textContent = "Ø´Ø±Ø­ 2: " + item.exp2;
  rdiv.style.display = 'block';
  state[origIndex].revealed = true;
}

/* ====== Shuffle & ShowAll & Search (operate on displayOrder) ====== */
document.getElementById('shuffle').addEventListener('click', function(){
  // Fisher-Yates on displayOrder
  for(let i=displayOrder.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [displayOrder[i], displayOrder[j]] = [displayOrder[j], displayOrder[i]];
  }
  renderQuestionsByOrder();
});

document.getElementById('showAll').addEventListener('click', function(){
  displayOrder = Array.from({length: totalQuestions}, (_,i)=>i);
  renderQuestionsByOrder();
});

document.getElementById('search').addEventListener('input', function(){
  const s = this.value.trim().toLowerCase();
  if(!s){
    displayOrder = Array.from({length: totalQuestions}, (_,i)=>i);
    renderQuestionsByOrder();
    return;
  }
  const filtered = [];
  for(let i=0;i<questions.length;i++){
    const qLower = questions[i].q.toLowerCase();
    const optsJoined = questions[i].opts.join(' ').toLowerCase();
    if(qLower.includes(s) || optsJoined.includes(s)) filtered.push(i);
  }
  displayOrder = filtered;
  renderQuestionsByOrder();
});

/* ====== Finish / Reset ====== */
document.getElementById('finishBtn').addEventListener('click', finishQuiz);
document.getElementById('resetBtn').addEventListener('click', function(){
  // reset state
  state = new Array(totalQuestions).fill(null).map(()=>({ selIndex:null, revealed:false, scored:false }));
  displayOrder = Array.from({length: totalQuestions}, (_,i)=>i);
  renderQuestionsByOrder();
  document.getElementById('resultText').textContent = 'Ù„Ù… ÙŠØªÙ… Ø§Ø­ØªØ³Ø§Ø¨ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¨Ø¹Ø¯. Ø§Ø¶ØºØ· "Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±" Ø¹Ù†Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡.';
  document.getElementById('advice').textContent = '';
});

/* ====== finishQuiz: compute score based on state & correctIndexMap ====== */
function finishQuiz(){
  let total = totalQuestions;
  let correct = 0;
  for(let i=0;i<total;i++){
    const sel = state[i].selIndex;
    if(sel !== null && sel === getCorrectIndex(i)) correct++;
  }
  const resultText = document.getElementById('resultText');
  resultText.innerHTML = `Ø­ØµÙ„Øª Ø¹Ù„Ù‰ <strong>${correct}</strong> Ù…Ù† <strong>${total}</strong> Ù†Ù‚Ø·Ø©.`;

  const percent = (correct/total)*100;
  const advice = document.getElementById('advice');
  if(percent >= 85) advice.textContent = "ğŸ”¥ Ù…Ù…ØªØ§Ø²! Ù…Ø³ØªÙˆØ§Ùƒ Ù‚ÙˆÙŠ Ø¬Ø¯Ø§Ù‹ â€” Ø§Ø³ØªÙ…Ø± Ø¨Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©.";
  else if(percent >= 60) advice.textContent = "âœ¨ Ø¬ÙŠØ¯! ØªØ­ØªØ§Ø¬ Ù…Ø±Ø§Ø¬Ø¹Ø© Ù„Ø¨Ø¹Ø¶ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©.";
  else advice.textContent = "âš ï¸ Ø¨Ø­Ø§Ø¬Ø© Ø¥Ù„Ù‰ ØªØ­Ø³ÙŠÙ†: Ø±Ø§Ø¬Ø¹ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª ÙˆØªÙ…Ø±Ù‘Ù† Ø£ÙƒØ«Ø±.";

  resultText.scrollIntoView({behavior:'smooth', block:'center'});
}

/* ====== End of script ====== */
</script>
</body>
</html>
